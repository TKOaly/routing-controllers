{"version":3,"sources":["../../src/metadata-builder/MetadataArgsStorage.ts"],"names":[],"mappings":"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","file":"MetadataArgsStorage.js","sourcesContent":["import {ControllerMetadataArgs} from \"../metadata/args/ControllerMetadataArgs\";\r\nimport {ActionMetadataArgs} from \"../metadata/args/ActionMetadataArgs\";\r\nimport {ParamMetadataArgs} from \"../metadata/args/ParamMetadataArgs\";\r\nimport {ResponseHandlerMetadataArgs} from \"../metadata/args/ResponseHandleMetadataArgs\";\r\nimport {MiddlewareMetadataArgs} from \"../metadata/args/MiddlewareMetadataArgs\";\r\nimport {UseMetadataArgs} from \"../metadata/args/UseMetadataArgs\";\r\nimport {UseInterceptorMetadataArgs} from \"../metadata/args/UseInterceptorMetadataArgs\";\r\nimport {InterceptorMetadataArgs} from \"../metadata/args/InterceptorMetadataArgs\";\r\n\r\n/**\r\n * Storage all metadatas read from decorators.\r\n */\r\nexport class MetadataArgsStorage {\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Properties\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Registered controller metadata args.\r\n     */\r\n    controllers: ControllerMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered middleware metadata args.\r\n     */\r\n    middlewares: MiddlewareMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered interceptor metadata args.\r\n     */\r\n    interceptors: InterceptorMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered \"use middleware\" metadata args.\r\n     */\r\n    uses: UseMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered \"use interceptor\" metadata args.\r\n     */\r\n    useInterceptors: UseInterceptorMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered action metadata args.\r\n     */\r\n    actions: ActionMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered param metadata args.\r\n     */\r\n    params: ParamMetadataArgs[] = [];\r\n\r\n    /**\r\n     * Registered response handler metadata args.\r\n     */\r\n    responseHandlers: ResponseHandlerMetadataArgs[] = [];\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Public Methods\r\n    // -------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Filters registered middlewares by a given classes.\r\n     */\r\n    filterMiddlewareMetadatasForClasses(classes: Function[]): MiddlewareMetadataArgs[] {\r\n        return classes\r\n            .map(cls => this.middlewares.find(mid => mid.target === cls))\r\n            .filter(midd => midd !== undefined); // this might be not needed if all classes where decorated with `@Middleware`\r\n    }\r\n\r\n    /**\r\n     * Filters registered interceptors by a given classes.\r\n     */\r\n    filterInterceptorMetadatasForClasses(classes: Function[]): InterceptorMetadataArgs[] {\r\n        return this.interceptors.filter(ctrl => {\r\n            return classes.filter(cls => ctrl.target === cls).length > 0;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filters registered controllers by a given classes.\r\n     */\r\n    filterControllerMetadatasForClasses(classes: Function[]): ControllerMetadataArgs[] {\r\n        return this.controllers.filter(ctrl => {\r\n            return classes.filter(cls => ctrl.target === cls).length > 0;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filters registered actions by a given classes.\r\n     */\r\n    filterActionsWithTarget(target: Function): ActionMetadataArgs[] {\r\n        return this.actions.filter(action => action.target === target);\r\n    }\r\n\r\n    /**\r\n     * Filters registered \"use middlewares\" by a given target class and method name.\r\n     */\r\n    filterUsesWithTargetAndMethod(target: Function, methodName: string): UseMetadataArgs[] {\r\n        return this.uses.filter(use => {\r\n            return use.target === target && use.method === methodName;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filters registered \"use interceptors\" by a given target class and method name.\r\n     */\r\n    filterInterceptorUsesWithTargetAndMethod(target: Function, methodName: string): UseInterceptorMetadataArgs[] {\r\n        return this.useInterceptors.filter(use => {\r\n            return use.target === target && use.method === methodName;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filters parameters by a given classes.\r\n     */\r\n    filterParamsWithTargetAndMethod(target: Function, methodName: string): ParamMetadataArgs[] {\r\n        return this.params.filter(param => {\r\n            return param.object.constructor === target && param.method === methodName;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filters response handlers by a given class.\r\n     */\r\n    filterResponseHandlersWithTarget(target: Function): ResponseHandlerMetadataArgs[] {\r\n        return this.responseHandlers.filter(property => {\r\n            return property.target === target;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Filters response handlers by a given classes.\r\n     */\r\n    filterResponseHandlersWithTargetAndMethod(target: Function, methodName: string): ResponseHandlerMetadataArgs[] {\r\n        return this.responseHandlers.filter(property => {\r\n            return property.target === target && property.method === methodName;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Removes all saved metadata.\r\n     */\r\n    reset() {\r\n        this.controllers = [];\r\n        this.middlewares = [];\r\n        this.interceptors = [];\r\n        this.uses = [];\r\n        this.useInterceptors = [];\r\n        this.actions = [];\r\n        this.params = [];\r\n        this.responseHandlers = [];\r\n    }\r\n\r\n}"],"sourceRoot":".."}